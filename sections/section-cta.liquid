{{ 'section-cta.css' | asset_url | stylesheet_tag }}

<div class="contact-form">
  <div class="container">
    {% render 'heading-group', section: section, class: 'contact-form', text_align: section.settings.text_align %}
    <div class="contact-form__wrapper">
      <div class="contact-form_image">
        {%- if section.settings.image != blank -%}
          {%- capture sizes -%}
            (min-width: 1100px) 540px, calc((100vw - 20px))
          {%- endcapture -%}
          {{
            section.settings.image
            | image_url: width: 540
            | image_tag: loading: 'lazy', sizes: sizes, widths: '360, 535, 720, 956', class: 'contact-form__image'
          }}
        {%- endif -%}
      </div>
      <div class="contact-form__inner contact-form__inner--{{ section.settings.align_content }}">
        <div class="contact-form__form">
          <div class="content">
            {% form 'contact', class: 'custom-contact-form' %}
              <div class="form__fields">

                <!-- Name -->
                <div class="field half left has-icon name">
                  <label for="ContactFormName" class="body-3">Your Name<span class="require">*</span></label>
                  <input type="text" id="ContactFormName" placeholder="Enter your full name" class="body-3" name="contact[name]" required>
                </div>

                <!-- Company -->
                <div class="field half right has-icon company">
                  <label for="ContactFormCompany" class="body-3">Company (Optional)</label>
                  <input type="text" id="ContactFormCompany" placeholder="Enter company name" class="body-3" name="contact[company]">
                </div>

                <!-- Email -->
                <div class="field half left has-icon email">
                  <label for="ContactFormEmail" class="body-3">Email<span class="require">*</span></label>
                  <input type="email" id="ContactFormEmail" placeholder="Enter your email" class="body-3" name="contact[email]" required>
                </div>

                <!-- Phone -->
                <div class="field half right has-icon phone">
                  <label for="ContactFormPhone" class="body-3">Phone Number (Optional)</label>
                  <input type="tel" id="ContactFormPhone" placeholder="Enter phone number" class="body-3" name="contact[phone]">
                </div>

                <!-- Project -->
                <div class="field full">
                  <label for="ContactFormMessage">Tell us about your project*</label>
                  <textarea id="ContactFormMessage" name="contact[body]" rows="6" required placeholder="What products are you interested in?&#10;How many do you need?"></textarea>
                </div>
              </div>

              <!-- Captcha (Shopify auto) -->
              {%- if form.errors -%}
                <div class="form__message form__message--error">
                  {% render 'icon-error' %}
                  <ul>
                    {% for field in form.errors %}
                      <li>{{ field | capitalize }} — {{ form.errors.messages[field] }}</li>
                    {% endfor %}
                  </ul>
                </div>
              {%- endif -%}

              {%- if form.posted_successfully? -%}
                <div class="form__message form__message--success" tabindex="-1" autofocus>
                  {% render 'icon-success' %}
                  {{ section.settings.success_message }}
                </div>
              {%- endif -%}

              <button
                type="submit"
                class="contact-form__button button button--{{ section.settings.button_style }} focus-inset"
              >
                <div class="button__content">
                  <span class="button__label" data-label="Submit">Submit</span>
                </div>
                <span class="animated-button-circle"></span>
              </button>
            {% endform %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Contact form",
  "tag": "section",
  "class": "spaced-section",
  "enabled_on": {
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Get in touch"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        { "value": "h3", "label": "H3" },
        { "value": "h2", "label": "H2" }
      ],
      "default": "h2",
      "label": "Heading size"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "text_alignment",
      "id": "text_align",
      "label": "Text alignment",
      "default": "center"
    },
    {
      "type": "select",
      "id": "button_style",
      "options": [
        { "value": "primary", "label": "Primary" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "tertiary", "label": "Tertiary" }
      ],
      "default": "primary",
      "label": "Button style"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "align_content",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left",
      "label": "Align content"
    },
    {
      "type": "inline_richtext",
      "id": "success_message",
      "label": "Success message",
      "default": "Thank you! We’ll be in touch soon."
    }
  ],
  "presets": [
    { "name": "Contact form" }
  ]
}
{% endschema %}
